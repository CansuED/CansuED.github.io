---
layout: compress
---

{% include base_path %}

<!doctype html>
<html lang="{{ site.locale | slice: 0,2 }}" class="no-js">
  <head>
    {% include head.html %}
    {% include head/custom.html %}
  </head>

  <body>
    {% include browser-upgrade.html %}
    {% include masthead.html %}

    {{ content }}
    {% include scripts.html %}

    <script>
    (function() {
      function applyTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        document.body.setAttribute('data-theme', theme);
      }
      
      const currentTheme = localStorage.getItem('theme') || 'light';
      applyTheme(currentTheme);

      setTimeout(function() {
        const themeToggle = document.createElement('button');
        themeToggle.className = 'theme-toggle';
        themeToggle.setAttribute('aria-label', 'Toggle dark mode');
        themeToggle.innerHTML = '<span class="theme-icon">' + (currentTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô') + '</span>';
        
        const mastheadMenu = document.querySelector('.masthead__menu');
        if (mastheadMenu) {
          mastheadMenu.appendChild(themeToggle);
        }

        themeToggle.addEventListener('click', function() {
          const theme = document.documentElement.getAttribute('data-theme');
          const newTheme = theme === 'light' ? 'dark' : 'light';
          
          applyTheme(newTheme);
          localStorage.setItem('theme', newTheme);
          
          const themeIcon = themeToggle.querySelector('.theme-icon');
          themeIcon.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        });
      }, 100);

      const navLinks = document.querySelectorAll('.masthead__menu-item a');
      const navToggle = document.getElementById('nav-toggle');
      
      if (navLinks && navToggle) {
        navLinks.forEach(link => {
          link.addEventListener('click', () => {
            navToggle.checked = false;
          });
        });
      }

      document.addEventListener('click', (e) => {
        const nav = document.querySelector('.greedy-nav');
        const toggle = document.querySelector('.nav-toggle-label');
        
        if (navToggle && navToggle.checked && 
            !nav.contains(e.target) && 
            e.target !== toggle) {
          navToggle.checked = false;
        }
      });
    })();
    </script>
  </body>
</html>